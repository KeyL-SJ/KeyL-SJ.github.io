<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>林守拙的个人空间</title><meta name="author" content="林守拙"><meta name="copyright" content="林守拙"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="抱朴守拙，行稳致远">
<meta property="og:type" content="website">
<meta property="og:title" content="林守拙的个人空间">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="林守拙的个人空间">
<meta property="og:description" content="抱朴守拙，行稳致远">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/bingbing2_corrosion_port.jpg">
<meta property="article:author" content="林守拙">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/bingbing2_corrosion_port.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '林守拙的个人空间',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-12-30 00:07:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/bingbing2_corrosion_port.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/11.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="林守拙的个人空间"><span class="site-name">林守拙的个人空间</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">林守拙的个人空间</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/KeyL-SJ" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/12/29/stm32-spi-dma%E9%A9%B1%E5%8A%A8WS2812%E7%AC%94%E8%AE%B0/" title="stm32_spi_dma驱动WS2812笔记">stm32_spi_dma驱动WS2812笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-12-29T15:46:07.000Z" title="发表于 2024-12-29 23:46:07">2024-12-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">STM32_SPI_DMA驱动WS2812笔记一、WS2812简介WS2812B是一种数字可编程LED灯。它由RGB（红、绿、蓝）三种颜色的LED组成，并集成了控制电路和信号处理功能。其引脚图如下：

WS2812的驱动原理如下：

可以看到：WS2812的时序中一个位大约需要1.25us的时间；当高电平的时间占用时间位0.85us，低电平占用时间为0.4us时表示传输位为1，反之则表示传输位为0。
而传输一个颜色信号需要24个Bit，其数据传输结构如下：

本项目中只使用1个WS2812灯珠，故每发送一个24Bit数据之后，就需要对WS2812进行复位，根据上文的数据传输时间可知，WS2812复位的条件为低电平持续280us以上。

二、SPI驱动WS2812实现本项目中使用SPI驱动WS2812，使用SPI不是用SCLK引脚的信号，而是MOSI引脚的信号，因为SCK引脚的脉冲宽度时固定的，但是我们可以控制MOSI输出信号。例如我们输出 b1111 1000 时，高电平的宽度与低电平的比值为 5:3，就相当于产生了一个WS2812高电平脉冲，然后我们可以再输出 b1110 0000， ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/10/16/%E7%94%B5%E5%AF%BC%E5%A2%9E%E9%87%8F%E6%B3%95MPPT/" title="电导增量法MPPT">电导增量法MPPT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-10-16T14:36:06.000Z" title="发表于 2024-10-16 22:36:06">2024-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">电导增量法MPPT一、背景扰动观察法MPPT的优点是算法简单，容易实现，但对于光强快速变化的环境易产生错误的跟踪，有较大的功率损失。有时还会发生程序控制在运行中的失序，出现误判，还可能产生振荡现象。

例如：在光强变化快速的情况下，假定系统一开始工作在$S1$曲线上$①$点，若是此时光照强度发生变化，由于扰动的作用，这时工作点向右移动到了$S2$曲线上的$②$点，并且$P②&gt;P①$，系统便认为此时最大功率点应该在$②$点的右边，仍向右调节工作点。
二、原理电导增量法(Incremental Conductance, INC) 是通过比较光伏电池阵列的瞬时导抗与导抗的变化量的方法来完成最大功率点跟踪的功能。
电导增量法避免了扰动观测法的盲目性，它能够判断出工作点电压与最大功率点电压之间的关系。

光伏阵列的电压功率曲线是一个单峰的曲线，在输出功率最大点处，功率对电压的导数为零，要寻找最大功率点，只要在功率对电压的导数大于零的区域增加电压，在功率对电压的导数小于零的区域减小电压，在导数等于零或非常接近于零的时候，电压保持不变即可。
光伏电池的瞬时功率：$P = UI$ ；
两端同时对 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/10/16/%E5%8F%98%E6%AD%A5%E9%95%BF%E6%89%B0%E5%8A%A8%E8%A7%82%E5%AF%9F%E6%B3%95MPPT/" title="变步长扰动观察法MPPT">变步长扰动观察法MPPT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-10-16T14:19:23.000Z" title="发表于 2024-10-16 22:19:23">2024-10-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">变步长扰动观察法MPPT一、原理扰动观测法的基本思想是通过扰动光伏电池的输出电压，达到输出功率的变化，根据功率变化的趋势改变扰动电压方向，使光伏电池最终工作于最大功率点。
工作原理：先扰动输出电压值，然后测其功率变化并与扰动之前的功率值比较，如果功率值增加，则表示扰动方向正确，继续朝同一方向扰动，如果扰动后功率值小于扰动前的值，则往相反的方向扰动。

扰动观测法流程图如下：

扰动观测法按照每次扰动的电压变化量是否固定，可分为定步长和变步长扰动观测法。
二、定步长误差分析定步长情况下，选择不同步长的效果如下：

大步长：虽然能够迅速到达最大功率点，但是稳定的时候稳态震荡比较大；


小步长：采用小步长可以改善稳态时震荡的幅度，但是当外界环境发生变化的时候，MPPT响应相对比较慢；



扰动观测法实质上是一个自寻优过程，通过对阵列当前输出电压与电流检测，得到当前阵列输出功率，再与已被存储的前一时刻阵列功率相比较，舍小存大，再检测， 再比较，如此不停的周而复始，便可使阵列动态的工作在最大功率点上。
此方法的优点是算法简单，容易实现，但对于光强快速变化的环境易产生错误的跟踪，有较大的功率损 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/11/01/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="嵌入式软件开发基础知识">嵌入式软件开发基础知识</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-11-01T14:41:25.000Z" title="发表于 2023-11-01 22:41:25">2023-11-01</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">一、C语言基础1、 基本语法1.1 while与do while的区别
while循环在执行循环体内容之前会进行条件判断，若条件满足，则才会不断执行循环体内的内容，直到条件不满足或者遇到break语句。

do while会先执行一次循环体的内容，之后再进行条件判断，若条件满足，则继续不断执行循环体内的内容。


1.2 数据基本类型
1. 整型整型分为整形常量和整形变量，常量就是我们平时所看到的准确的数字，例如：1、20、333等等，变量则按我的理解是我向内存去申请一个存储空间，告诉内存空间我申请了这个地方用来存放一个整形的数据，但是什么时候放并没有直接确定。一般占4个字节（32位），最高位代表符号，0表示正数，1表示负数，取值是-2147483648~2147483647（-2^31^ ~ 2^31^-1），在内存中的存储顺序是低位在前、高位在后，例如0x12345678。

短整型 short，内存中占2个字节(2 Bytes)，是short int 的简写。取值范围：-32768 ~ + 32767 (-2^15^ ~ 2^15^-1)。

整型int，内存中占4个字节(4 B ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/08/16/FreeRTOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="FreeRTOS学习笔记">FreeRTOS学习笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-16T14:07:49.000Z" title="发表于 2023-08-16 22:07:49">2023-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">FreeRTOS学习笔记1、简介FreeRTOS 是一个 RTOS 类的嵌入式实时操作系统。它的社会占有量很高，许多半导体厂商产品的 SDK 包就使用 FreeRTOS 作为其操作系统，尤其是 WIFI、蓝牙这些带协议栈的芯片或模块。
FreeRTOS 的内核支持抢占式， 合作式和时间片调度。任务与任务、 任务与中断之间可以使用任务通知、消息队列、二值信号量、数值型信号量、 递归互斥信号量和互斥信号量进行通信和同步。
1.1 任务RTOS 系统的核心就是任务管理， FreeRTOS 是一个抢占式的实时多任务系统， 其任务调度器也是抢占式的。高优先级的任务可以打断低优先级任务的运行而取得 CPU 的使用权，这样就保证了那些紧急任务的运行。 这样我们就可以为那些对实时性要求高的任务设置一个很高的优先级。 高优先级的任务执行完成以后重新把 CPU 的使用权归还给低优先级的任务，这个就是抢占式多任务系统的基本原理。
在使用 RTOS 的时候一个实时应用可以作为一个独立的任务。每个任务都有自己的运行环境， 不依赖于系统中其他的任务或者 RTOS 调度器。 任何一个时间点只能有一个任务运行，具体运 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/08/16/%E7%94%B5%E5%8A%9B%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/" title="电力电子技术">电力电子技术</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-08-16T14:07:49.000Z" title="发表于 2023-08-16 22:07:49">2023-08-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">电力电子技术1. 绪论电力电子技术就是使用电力电子器件对电能进行变化和控制的技术。目前所用的电力电子器件均由半导体制成，故电力电子器件也称电力半导体器件。
通常所用的电力有支流和交流两种从公共电网直接得到的电力是交流，从蓄电池和干电池得到的电力是直流，这些电源得到的电力往往不能直接满足需求，需要进行电力变化。电力变换通常可以分为四大类，即交流变直流(AC-DC)、直流变交流（DC-AC)、直流变直流(DC-DC)、交流变交流(AC-AC)。交流变直流称为整流，直流变交流称为逆变，直流变直流是值一种电压(或电流)的直流变为另一种电压(或电流)的直流，可用直流斩波电路实现。交流变交流可以是电压或电力的变换，称为交流电力控制，也可以是频率或相数的变换。
通常把电力电子技术分为电力电子器件制造技术和变流技术两个分支。变流技术又称为电力电子器件的应用技术，它包括使用电力电子器件构成各种电力变换电路和对这些电路进行控制的技术，以及由这些电路构成电力电子装置和电力电子系统的技术。
2. 电力电子器件2.1 电力电子器件概述2.1.1 电力电子器件的概念和特征在电气设备或电力系统中，直接承担电能的变换 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/07/31/I2C%E6%80%BB%E7%BA%BF%E4%B8%8E%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/" title="I2C总线与通信协议">I2C总线与通信协议</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-31T14:27:51.000Z" title="发表于 2023-07-31 22:27:51">2023-07-31</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">1. I2C总线和通信协议I2C(Inter-Integrated Circuit)接口是一种串行数字总线接口。I2C接口只有2根信号线，总线上可以连接多个设备，硬件实现简单，可拓展性钱。I2C通信协议可以用普通GPIO引脚进行软件模拟。I2C接口主要用于通信速率要求不高，以及多个器件之间通信的应用场景。
1.1 I2C总线结构一个器件的I2C接口只有2根信号线，即双向串行数据线SDA和时钟信号线SCL。I2C是一种多设备总线，一根总线上可以挂在多个设备。
I2C总线有如下特点：

I2C总线只有两根信号线，SDA是双向串行数据线，SCL是时钟信号线，用于数据收发的同步。
I2C总线上可以挂载多个设备，一般有一个主设备、多个从设备。MCU一般作为主设备，外围器件作为从设备。在I2C通信协议中，主动发起通信的器件就是主设备，被动进行响应的器件就是从设备。
I2C总线上每个器件有一个7位或10位的地址，主设备发起通信时，会首先发送目标设备地址，只有地址对应的从设备才会做出响应。
I2C总线的两根信号线上有上拉电阻。当I2C器件空闲时，其输出接口是高阻态。当所有设备都空闲时，I2C总线上时高 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/07/27/%E5%8F%8C%E7%8E%AF%E6%8E%A7%E5%88%B6PID%E7%AE%97%E6%B3%95/" title="双环控制PID算法">双环控制PID算法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-27T12:21:44.000Z" title="发表于 2023-07-27 20:21:44">2023-07-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">1. PID算法概念PID算法是工业应用中最广泛算法之一，在闭环系统的控制中，可自动对控制系统进行准确且迅速的校正。PID算法已经有100多年历史，在四轴飞行器，平衡小车、汽车定速巡航、温度控制器等场景均有应用。
PID算法数学公式PID算法数学公式如下所示：

u(t) = K_pe(t) + K_i \int^t_0e(t)dt + K_d \frac{de(t)}{dt}该公式适用于连续的模拟量信号，然而本系统中使用的传感器数据为离散的数字量信号，故而需要对公式进行离散化处理，使用一阶差分代替一阶微分、使用累加代 替积分，离散化之后的公式如下：

u(t) = K_pe(t) + K_i \sum(t) + K_d[e(t) - e(t-1)]2. 双环控制PID算法在比较复杂的系统之中，普通的PID算法可能不能满足系统的需求，在工业控制中，对于复杂的系统，常见的方法是使用多环控制的PID算法。针对基于PID的智能自平衡小车，最常见的方法就是使用双环控制的PID算法。
在智能自平衡车的双环控制PID算法中，包含直立环和速度环可实现小车在原地保持平衡状态，若小车需要转向，也可以再加 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/07/21/modbus-blog/" title="modbus-blog">modbus-blog</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-21T05:11:46.000Z" title="发表于 2023-07-21 13:11:46">2023-07-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">modbus-RTU协议Modbus报文帧结构一个报文就是一帧数据，一个数据帧就一个报文： 指的是一串完整的指令数据，本质就是一串数据Modbus协议在串行链路上的报文格式如下所示：




从机地址
功能码
数据
CRC校验




1 byte
1 byte
N bytes
2 bytes




帧结构 = 从机地址 + 功能吗 + 数据 + 校验

从机地址: 每个从机都有唯一地址，占用一个字节,范围0-255,其中有效范围是1-247,其中255是广播地址(广播就是对所有从机发送应答)

功能码: 占用一个字节,功能码的意义就是,知道这个指令是干啥的,比如你可以查询从机的数据,也可以修改从机的数据,所以不同功能码对应不同功能.

数据: 根据功能码不同,有不同功能，比方说功能码是查询从机的数据，这里就是查询数据的地址和查询字节数等。
校验: 在数据传输过程中可能数据会发生错误，CRC检验检测接收的数据是否正确

Modbus功能码Modbus规定了多个功能，那么为了方便的使用这些功能，我们给每个功能都设定一个功能码，也就是指代码。
Modbus协议同时规定了二十几种功能码，但 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/bingbing2_corrosion_port.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">林守拙</div><div class="author-info__description">抱朴守拙，行稳致远</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/KeyL-SJ"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/KeyL-SJ" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/12/29/stm32-spi-dma%E9%A9%B1%E5%8A%A8WS2812%E7%AC%94%E8%AE%B0/" title="stm32_spi_dma驱动WS2812笔记">stm32_spi_dma驱动WS2812笔记</a><time datetime="2024-12-29T15:46:07.000Z" title="发表于 2024-12-29 23:46:07">2024-12-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/16/%E7%94%B5%E5%AF%BC%E5%A2%9E%E9%87%8F%E6%B3%95MPPT/" title="电导增量法MPPT">电导增量法MPPT</a><time datetime="2024-10-16T14:36:06.000Z" title="发表于 2024-10-16 22:36:06">2024-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/16/%E5%8F%98%E6%AD%A5%E9%95%BF%E6%89%B0%E5%8A%A8%E8%A7%82%E5%AF%9F%E6%B3%95MPPT/" title="变步长扰动观察法MPPT">变步长扰动观察法MPPT</a><time datetime="2024-10-16T14:19:23.000Z" title="发表于 2024-10-16 22:19:23">2024-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/01/%E5%B5%8C%E5%85%A5%E5%BC%8F%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="嵌入式软件开发基础知识">嵌入式软件开发基础知识</a><time datetime="2023-11-01T14:41:25.000Z" title="发表于 2023-11-01 22:41:25">2023-11-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/16/FreeRTOS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="FreeRTOS学习笔记">FreeRTOS学习笔记</a><time datetime="2023-08-16T14:07:49.000Z" title="发表于 2023-08-16 22:07:49">2023-08-16</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">学习</span><span class="card-category-list-count">9</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/MPPT/" style="font-size: 1.23em; color: #999ea6">MPPT</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 1.1em; color: #999">软件开发</a> <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 1.1em; color: #999">嵌入式</a> <a href="/tags/I2C/" style="font-size: 1.1em; color: #999">I2C</a> <a href="/tags/UART/" style="font-size: 1.1em; color: #999">UART</a> <a href="/tags/FreeRTOS/" style="font-size: 1.1em; color: #999">FreeRTOS</a> <a href="/tags/%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/" style="font-size: 1.23em; color: #999ea6">通信协议</a> <a href="/tags/STM32/" style="font-size: 1.5em; color: #99a9bf">STM32</a> <a href="/tags/%E7%94%B5%E5%8A%9B%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/" style="font-size: 1.37em; color: #99a4b2">电力电子技术</a> <a href="/tags/Modbus/" style="font-size: 1.1em; color: #999">Modbus</a> <a href="/tags/PID%E7%AE%97%E6%B3%95/" style="font-size: 1.1em; color: #999">PID算法</a> <a href="/tags/WS2812/" style="font-size: 1.1em; color: #999">WS2812</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">9</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">63.6k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-12-29T16:07:45.075Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 林守拙</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, ))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["抱朴守拙、行稳致远"])
  } else {
    document.getElementById("subtitle").textContent = "抱朴守拙、行稳致远"
  }
}
typedJSFn.run(subtitleType)</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>